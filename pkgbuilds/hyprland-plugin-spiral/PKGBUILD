pkgname=hyprland-plugin-spiral
_hyprland_ver=0.51.0
pkgver=0.51.0.r0.0000000
pkgrel=1
pkgdesc="Spiral layout plugin for Hyprland"
arch=('x86_64' 'aarch64')
url="https://github.com/fecet/hyprspiral"
license=('MIT')
depends=("hyprland-spiral>=${_hyprland_ver}")
makedepends=('git' 'cmake' "hyprland-spiral>=${_hyprland_ver}")
source=("git+${url}")
sha256sums=('SKIP')

pkgver() {
	cd "$srcdir"/"hyprspiral"
	printf "%s.r%s.%s" \
		"${_hyprland_ver}" \
		"$(git rev-list --count HEAD)" \
		"$(git rev-parse --short HEAD)"
}

build() {
	cd "$srcdir"/"hyprspiral"
	make release PREFIX=/usr
}

package() {
	install -Dm0755 "$srcdir/hyprspiral/hyprscroller.so" \
		"$pkgdir/usr/lib/hyprspiral.so"
}
